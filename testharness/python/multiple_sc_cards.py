import necpp as Necpp


import unittest


class TestSurfacePatches(unittest.TestCase):

  ''' # CM W2IMU 10GHz F=0.55
      reported by Yoshi Takeyasu
  '''
  def test_reg_rw(self):
    nec = Necpp.nec_create()

    nec_sp_card(nec, 0,3,0.019000,-0.001424,0.078830,0.019000,0.001424,0.078830)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.076180,0.019000,-0.001424,0.076180)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.073530,0.019000,-0.001424,0.073530)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.070880,0.019000,-0.001424,0.070880)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.068230,0.019000,-0.001424,0.068230)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.065580,0.019000,-0.001424,0.065580)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.062930,0.019000,-0.001424,0.062930)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.060280,0.019000,-0.001424,0.060280)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.057630,0.019000,-0.001424,0.057630)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.054980,0.019000,-0.001424,0.054980)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.052330,0.019000,-0.001424,0.052330)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.049680,0.019000,-0.001424,0.049680)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.047030,0.019000,-0.001424,0.047030)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.044380,0.019000,-0.001424,0.044380)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.041730,0.019000,-0.001424,0.041730)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.039080,0.019000,-0.001424,0.039080)
    nec_sc_card(nec, 0,3,0.019000,0.001424,0.036430,0.019000,-0.001424,0.036430)
    nec_sc_card(nec, 0,3,0.017283,0.001295,0.033856,0.017283,-0.001295,0.033856)
    nec_sc_card(nec, 0,3,0.015566,0.001167,0.031282,0.015566,-0.001167,0.031282)
    nec_sc_card(nec, 0,3,0.013849,0.001038,0.028708,0.013849,-0.001038,0.028708)
    nec_sc_card(nec, 0,3,0.012132,0.000909,0.026134,0.012132,-0.000909,0.026134)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.023560,0.010415,-0.000780,0.023560)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.020942,0.010415,-0.000780,0.020942)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.018324,0.010415,-0.000780,0.018324)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.015707,0.010415,-0.000780,0.015707)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.013089,0.010415,-0.000780,0.013089)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.010471,0.010415,-0.000780,0.010471)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.007853,0.010415,-0.000780,0.007853)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.005236,0.010415,-0.000780,0.005236)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.002618,0.010415,-0.000780,0.002618)
    nec_sc_card(nec, 0,3,0.010415,0.000780,0.000000,0.010415,-0.000780,0.000000)
    nec_sc_card(nec, 0,3,0.007811,0.000585,0.000000,0.007811,-0.000585,0.000000)
    nec_sc_card(nec, 0,3,0.005208,0.000390,0.000000,0.005208,-0.000390,0.000000)
    nec_sc_card(nec, 0,3,0.002604,0.000195,0.000000,0.002604,-0.000195,0.000000)
    nec_sc_card(nec, 0,3,0.000026,0.000002,0.000000,0.000026,-0.000002,0.000000)
    nec_gm_card(nec, 0,41,0.000000,0.000000,8.571429)
    nec_gw_card(nec, 1,15,0.000000,0.005829,0.004961,0.000000,-0.005829,0.004961,0.000248)
    nec_gm_card(nec, 0,0,0.000000,0.000000,0.000000,0.000000,0.000000,-0.078830)
    nec_geometry_complete(nec) # GE
    FR,0,1,0,0,10450.000000
    EX,0,1,8,0,1.000000,0.000000
    LD,5,0,0,0,3.720000E+07
    PT,-1
    RP,0,361,3,1500,0.000000,0.000000,1.000000,45.000000
    EN
    
    max_gain = nec_get_max_gain_db(nec)
    Necpp.nec_delete(nec)

    self.assertEqual(max_gain, 10.333162)

if __name__ == '__main__':
  unittest.main()